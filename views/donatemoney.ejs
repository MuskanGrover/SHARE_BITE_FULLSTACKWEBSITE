<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Donate Money</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"/>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: black;
      color: white;
    }

    header {
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      background-color: #000;
    }

    header .logo img {
      height: 50px;
      width: auto;
      border-radius: 50px;
    }

    nav ul {
      display: flex;
      gap: 15px;
      list-style-type: none;
      padding: 0;
      margin: 0;
      flex-wrap: wrap;
      align-items: center;
    }

    nav a {
      color: rgb(214, 206, 206);
      font-weight: bold;
      text-decoration: none;
      padding: 6px 10px;
    }

    nav a:hover {
      color: #FF4500;
    }

    .cta-btn {
      background-color: #FF4500;
      padding: 8px 15px;
      border-radius: 5px;
      color: white;
      text-decoration: none;
    }

    .cta-btn:hover {
      background-color: #926242;
    }

    .donate-section {
      padding: 40px 20px;
      max-width: 1000px;
      margin: auto;
      margin-top:70px;
    }

    .donate-section h1 {
      text-align: center;
      font-size: 2em;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-group input {
      width: 100%;
      padding: 10px;
      margin-top: 0.5rem;
      border: none;
      border-radius: 4px;
    }

    .payment-options {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .qr-container, .card-container {
      flex: 1 1 300px;
      background-color: #444;
      padding: 1rem;
      border-radius: 8px;
    }

    .qr-container img {
      width: 100%;
      max-width: 250px;
      display: block;
      margin: 0 auto;
    }

    .qr-container p {
      text-align: center;
    }

    .debit-form input {
      margin: 0.5rem 0;
      padding: 10px;
      width: 100%;
      border-radius: 4px;
      border: none;
    }

    .debit-form button {
      padding: 10px;
      background-color: #28a745;
      color: white;
      border: none;
      cursor: pointer;
      width: 100%;
      border-radius: 4px;
      font-size: 1em;
    }

    .confirmation {
      background-color: #d4edda;
      color: #155724;
      padding: 1rem;
      margin-top: 2rem;
      display: none;
      text-align: center;
      border-radius: 8px;
    }

    footer {
      background-color: #111;
      padding: 40px 20px;
      margin-top: 90px;
      text-align: center;
    }

    #img img {
      height: 100px;
      width: 100px;
    }

    .footer-links ul {
      padding-top: 10px;
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: white;
      text-decoration: none;
    }

    .social-media a {
      color: white;
      margin: 10px;
      font-size: 2.5em;
    }

    .social-media a:hover {
      color: grey;
    }

    @media (max-width: 768px) {
      nav ul {
        flex-direction: column;
        align-items: center;
      }

      header {
        flex-direction: column;
        align-items: center;
      }

      .payment-options {
        flex-direction: column;
      }

      .donate-section h1 {
        font-size: 1.5em;
      }

      .social-media a {
        font-size: 2em;
        margin: 8px;
      }
    }

    @media (max-width: 480px) {
      .donate-section {
        padding: 20px;
      }

      .footer-links ul {
        flex-direction: column;
        gap: 12px;
        align-items: center;
      }

      .social-media a {
        font-size: 1.8em;
        margin: 6px;
      }
    }
  </style>
</head>
<body>

  <header>
    <div class="logo">
      <img src="logo.jpeg" alt="Food Share Logo">
    </div>
    <nav>
      <ul>
          <li><a href="/finddonation">Find Donations</a></li>
            <li><a href="/games">Games</a></li>
            <li><a href="/donationtracker">LeaderBoard</a></li>
            <li><a href="/about">About Us</a></li>
            <li><a href="/signup" class="cta-btn">Sign Up</a></li>
            <li><a href="/login" class="cta-btn">Log In</a></li>
      </ul>
    </nav>
  </header>

  <section class="donate-section">
    <h1>Donate to Support Our Cause</h1>
    <p style="text-align:center;">Your contribution makes a real difference.</p>

    <form id="donation-form">
      <div class="form-group">
        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" required placeholder="Your Name" />
      </div>

      <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" name="email" required placeholder="you@example.com" />
      </div>

      <div class="form-group">
        <label for="amount">Amount (in â‚¹)</label>
        <input type="number" id="amount" name="amount" required min="1" placeholder="Enter amount" />
      </div>
    </form>

    <div class="payment-options">
      <div class="qr-container">
        <h2 style="text-align:center;">Pay via UPI</h2>
        <img src="/images/download.png" alt="Scan UPI QR to Pay" />
        <p>Scan this QR code using any UPI app to donate.</p>
        <button onclick="handleUpiPayment()" style="margin-top: 1rem; width: 100%; padding: 10px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
  I have paid via UPI
</button>

      </div>

      <div class="card-container">
        <h2 style="text-align:center;">Pay with Debit/Credit Card</h2>
        <form class="debit-form" onsubmit="handleCardPayment(event)">
          <input type="text" placeholder="Card Number" required />
          <input type="text" placeholder="Name on Card" required />
          <input type="text" placeholder="Expiry MM/YY" required />
          <input type="text" placeholder="CVV" required />
          <button type="submit">Pay Now</button>
        </form>
      </div>
    </div>

    <div id="confirmation" class="confirmation">
      <strong>Thank you for your donation!</strong>
      <p>We appreciate your support.</p>
    </div>
    <!-- UPI Confirmation Modal -->
<div id="upiModal" style="display:none; background-color:#333; padding:20px; border-radius:8px; margin-top:20px;">
  <h3>Confirm UPI Payment</h3>
  <form id="upiConfirmForm" enctype="multipart/form-data">
    <div class="form-group">
      <label for="screenshot">Upload Screenshot</label>
      <input type="file" id="screenshot" name="screenshot" accept="image/*" required />
    </div>
    <div class="form-group">
      <label for="txnId">Last 4 digits of Transaction ID</label>
      <input type="text" id="txnId" name="txnId" pattern="\\d{4}" maxlength="4" required placeholder="e.g. 1234" />
    </div>
    <button type="submit" style="background-color:#28a745; padding:10px; color:white; border:none; border-radius:4px; cursor:pointer;">
      Submit Confirmation
    </button>
  </form>
</div>

  </section>
  
  <footer>
    <div class="footer-container">
      <div id="img">
        <img src="logo.jpeg" alt="Logo">
      </div>
      <div class="footer-links">
        <ul>
          <li><a href="/about">About Us</a></li>
          <li><a href="/privacypolicy">Privacy Policy</a></li>
          <li><a href="/contactus">Contact Us</a></li>
          <li><a href="/termsofservice">Terms & Conditions</a></li>
        </ul>
      </div>
      <div class="social-media">
        <a href="https://www.facebook.com/domsfoodmission/"><i class="fa-brands fa-facebook"></i></a>
        <a href="https://en.wikipedia.org/wiki/Twitter"><i class="fa-brands fa-twitter"></i></a>
        <a href="https://www.instagram.com/donateameal_/?hl=en"><i class="fa-brands fa-instagram"></i></a>
        <a href="https://findfoodsupport.withgoogle.com/nonprofit-resources/"><i class="fa-brands fa-google-plus"></i></a>
        <a href="https://www.youtube.com/watch?v=sU6sglkD3MU"><i class="fa-brands fa-youtube"></i></a>
      </div>
    </div>
  </footer>
<script>
  function getFormData() {
    return {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      amount: document.getElementById("amount").value
    };
  }

  function handleUpiPayment() {
    const form = document.getElementById("donation-form");
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    // Show the confirmation modal
    document.getElementById("upiModal").style.display = "block";
  }

  function handleCardPayment(event) {
    event.preventDefault();
    const data = getFormData();

    fetch('/donate/card', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    }).then(res => {
      if (res.ok) {
        document.getElementById("confirmation").style.display = "block";
      } else {
        alert("Failed to process card payment.");
      }
    });
  }

  // Handle the UPI modal form submission
  document.getElementById("upiConfirmForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const data = getFormData();
    const formData = new FormData();
    formData.append("name", data.name);
    formData.append("email", data.email);
    formData.append("amount", data.amount);
    formData.append("txnId", document.getElementById("txnId").value);
    formData.append("screenshot", document.getElementById("screenshot").files[0]);

    fetch('/donate/upi-confirm', {
      method: 'POST',
      body: formData
    }).then(res => {
      if (res.ok) {
        document.getElementById("confirmation").style.display = "block";
        document.getElementById("upiModal").style.display = "none";
      } else {
        alert("Failed to confirm UPI donation.");
      }
    });
  });
</script>
